<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 2 Methods | Calibrating the Mode Choice Models of an Activity-Based Model and a Micro-Simulation Tool</title>
  <meta name="description" content="A short description" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content=" 2 Methods | Calibrating the Mode Choice Models of an Activity-Based Model and a Micro-Simulation Tool" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A short description" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 2 Methods | Calibrating the Mode Choice Models of an Activity-Based Model and a Micro-Simulation Tool" />
  
  <meta name="twitter:description" content="A short description" />
  



<meta name="date" content="2021-09-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="findings.html"/>
<style type="text/css">
p.abstract{
  text-align: center;
  font-weight: bold;
}
div.abstract{
  margin: auto;
  width: 90%;
}
</style>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Mode Choice Calibration</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Question</a></li>
<li class="chapter" data-level="2" data-path="methods.html"><a href="methods.html"><i class="fa fa-check"></i><b>2</b> Methods</a><ul>
<li class="chapter" data-level="2.1" data-path="methods.html"><a href="methods.html#data"><i class="fa fa-check"></i><b>2.1</b> Data</a></li>
<li class="chapter" data-level="2.2" data-path="methods.html"><a href="methods.html#models"><i class="fa fa-check"></i><b>2.2</b> Models</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="findings.html"><a href="findings.html"><i class="fa fa-check"></i><b>3</b> Findings</a><ul>
<li class="chapter" data-level="3.1" data-path="findings.html"><a href="findings.html#additional-analysis"><i class="fa fa-check"></i><b>3.1</b> Additional Analysis</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Calibrating the Mode Choice Models of an Activity-Based Model and a Micro-Simulation Tool</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="methods" class="section level1">
<h1><span class="header-section-number"> 2</span> Methods</h1>
<p>In this chapter, you describe the approach you have taken on the problem. This
usually involves a discussion about both the data you used and the models you
applied.</p>
<div id="data" class="section level2">
<h2><span class="header-section-number">2.1</span> Data</h2>
<p>Discuss where you got your data, how you cleaned it, any assumptions you made.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">data</span>(<span class="st">&quot;Car&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;mlogit&quot;</span>)</a>
<a class="sourceLine" id="cb1-2" title="2">car_mlogit &lt;-<span class="st"> </span>Car <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">choice =</span> <span class="kw">gsub</span>(<span class="st">&quot;choice&quot;</span>, <span class="st">&quot;&quot;</span>, choice)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="st">  </span><span class="kw">dfidx</span>( <span class="dt">varying =</span> <span class="dv">5</span><span class="op">:</span><span class="dv">70</span>, <span class="dt">shape =</span> <span class="st">&quot;wide&quot;</span>, <span class="dt">choice =</span> <span class="st">&quot;choice&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)</a></code></pre></div>
<p>Often there will be a table describing summary statistics of your dataset.
Table <a href="methods.html#tab:datasummary">2.1</a> shows a nice table using the <a href="https://vincentarelbundock.github.io/modelsummary/articles/datasummary.html"><code>datasummary</code></a>
functions in the <code>modelsummary</code> package.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">datasummary_balance</span>(</a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="op">~</span>type, </a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="dt">data =</span> car_mlogit <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="st">    </span><span class="kw">select</span>(type, fuel, price, range, size), </a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="dt">dinm =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb2-6" title="6">  <span class="dt">title =</span> <span class="st">&quot;Descriptive Statistics of Dataset&quot;</span></a>
<a class="sourceLine" id="cb2-7" title="7">  )</a></code></pre></div>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:datasummary">Table 2.1: </span>Descriptive Statistics of Dataset
</caption>
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="2">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
regcar (N=10930)
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
sportuv (N=1048)
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
sportcar (N=880)
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
stwagon (N=4446)
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
truck (N=5628)
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
van (N=4992)
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
Mean
</th>
<th style="text-align:left;">
Std. Dev.
</th>
<th style="text-align:left;">
Mean
</th>
<th style="text-align:left;">
Std. Dev.
</th>
<th style="text-align:left;">
Mean
</th>
<th style="text-align:left;">
Std. Dev.
</th>
<th style="text-align:left;">
Mean
</th>
<th style="text-align:left;">
Std. Dev.
</th>
<th style="text-align:left;">
Mean
</th>
<th style="text-align:left;">
Std. Dev.
</th>
<th style="text-align:left;">
Mean
</th>
<th style="text-align:left;">
Std. Dev.
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
price
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
4.2
</td>
<td style="text-align:left;">
1.9
</td>
<td style="text-align:left;">
4.7
</td>
<td style="text-align:left;">
1.9
</td>
<td style="text-align:left;">
4.8
</td>
<td style="text-align:left;">
2.2
</td>
<td style="text-align:left;">
4.1
</td>
<td style="text-align:left;">
1.9
</td>
<td style="text-align:left;">
4.2
</td>
<td style="text-align:left;">
2.0
</td>
<td style="text-align:left;">
4.2
</td>
<td style="text-align:left;">
1.9
</td>
</tr>
<tr>
<td style="text-align:left;">
range
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
237.2
</td>
<td style="text-align:left;">
94.5
</td>
<td style="text-align:left;">
241.6
</td>
<td style="text-align:left;">
94.7
</td>
<td style="text-align:left;">
233.6
</td>
<td style="text-align:left;">
96.7
</td>
<td style="text-align:left;">
238.7
</td>
<td style="text-align:left;">
94.3
</td>
<td style="text-align:left;">
238.2
</td>
<td style="text-align:left;">
93.1
</td>
<td style="text-align:left;">
236.8
</td>
<td style="text-align:left;">
94.7
</td>
</tr>
<tr>
<td style="text-align:left;box-shadow: 0px 1px">
size
</td>
<td style="text-align:left;box-shadow: 0px 1px">
</td>
<td style="text-align:left;box-shadow: 0px 1px">
2.4
</td>
<td style="text-align:left;box-shadow: 0px 1px">
0.8
</td>
<td style="text-align:left;box-shadow: 0px 1px">
2.1
</td>
<td style="text-align:left;box-shadow: 0px 1px">
1.0
</td>
<td style="text-align:left;box-shadow: 0px 1px">
1.4
</td>
<td style="text-align:left;box-shadow: 0px 1px">
1.0
</td>
<td style="text-align:left;box-shadow: 0px 1px">
2.3
</td>
<td style="text-align:left;box-shadow: 0px 1px">
0.8
</td>
<td style="text-align:left;box-shadow: 0px 1px">
2.4
</td>
<td style="text-align:left;box-shadow: 0px 1px">
0.8
</td>
<td style="text-align:left;box-shadow: 0px 1px">
2.5
</td>
<td style="text-align:left;box-shadow: 0px 1px">
0.7
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
N
</td>
<td style="text-align:left;">
%
</td>
<td style="text-align:left;">
N
</td>
<td style="text-align:left;">
%
</td>
<td style="text-align:left;">
N
</td>
<td style="text-align:left;">
%
</td>
<td style="text-align:left;">
N
</td>
<td style="text-align:left;">
%
</td>
<td style="text-align:left;">
N
</td>
<td style="text-align:left;">
%
</td>
<td style="text-align:left;">
N
</td>
<td style="text-align:left;">
%
</td>
</tr>
<tr>
<td style="text-align:left;">
fuel
</td>
<td style="text-align:left;">
gasoline
</td>
<td style="text-align:left;">
2704
</td>
<td style="text-align:left;">
24.7
</td>
<td style="text-align:left;">
280
</td>
<td style="text-align:left;">
26.7
</td>
<td style="text-align:left;">
218
</td>
<td style="text-align:left;">
24.8
</td>
<td style="text-align:left;">
1096
</td>
<td style="text-align:left;">
24.7
</td>
<td style="text-align:left;">
1413
</td>
<td style="text-align:left;">
25.1
</td>
<td style="text-align:left;">
1247
</td>
<td style="text-align:left;">
25.0
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
methanol
</td>
<td style="text-align:left;">
2729
</td>
<td style="text-align:left;">
25.0
</td>
<td style="text-align:left;">
246
</td>
<td style="text-align:left;">
23.5
</td>
<td style="text-align:left;">
225
</td>
<td style="text-align:left;">
25.6
</td>
<td style="text-align:left;">
1091
</td>
<td style="text-align:left;">
24.5
</td>
<td style="text-align:left;">
1445
</td>
<td style="text-align:left;">
25.7
</td>
<td style="text-align:left;">
1216
</td>
<td style="text-align:left;">
24.4
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
cng
</td>
<td style="text-align:left;">
2767
</td>
<td style="text-align:left;">
25.3
</td>
<td style="text-align:left;">
260
</td>
<td style="text-align:left;">
24.8
</td>
<td style="text-align:left;">
238
</td>
<td style="text-align:left;">
27.0
</td>
<td style="text-align:left;">
1109
</td>
<td style="text-align:left;">
24.9
</td>
<td style="text-align:left;">
1360
</td>
<td style="text-align:left;">
24.2
</td>
<td style="text-align:left;">
1282
</td>
<td style="text-align:left;">
25.7
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
electric
</td>
<td style="text-align:left;">
2730
</td>
<td style="text-align:left;">
25.0
</td>
<td style="text-align:left;">
262
</td>
<td style="text-align:left;">
25.0
</td>
<td style="text-align:left;">
199
</td>
<td style="text-align:left;">
22.6
</td>
<td style="text-align:left;">
1150
</td>
<td style="text-align:left;">
25.9
</td>
<td style="text-align:left;">
1410
</td>
<td style="text-align:left;">
25.1
</td>
<td style="text-align:left;">
1247
</td>
<td style="text-align:left;">
25.0
</td>
</tr>
</tbody>
</table>
</div>
<div id="models" class="section level2">
<h2><span class="header-section-number">2.2</span> Models</h2>
<p>If your work is mostly a new model, you probably will have introduced some
details in the literature review. But this is where you describe the
mathematical construction of your model, the variables it uses, and other
things. Some methods are so common (linear regression) that it is unnecessary to
explore them in detail. But others will need to be described, often with
mathematics. For example, the probability of a multinomial logit model is</p>
<p><span class="math display" id="eq:mnl">\[\begin{equation}
  P_i(X_{in}) = \frac{e^{X_{in}\beta_i}}{\sum_{j \in J}e^{X_{jn}\beta_j}}
  \tag{2.1}
\end{equation}\]</span></p>
<p>Use <a href="https://www.overleaf.com/learn/latex/mathematical_expressions">LaTeX mathematics</a>.
You’ll want to number display equations so that you can
refer to them later in the manuscript. Other simpler math can be described inline,
like saying that <span class="math inline">\(i, j \in J\)</span>. Details on using equations in bookdown are available
<a href="https://bookdown.org/yihui/bookdown/markdown-extensions-by-bookdown.html">here</a>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="findings.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["mode_choice_calibration.pdf", "mode_choice_calibration.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
